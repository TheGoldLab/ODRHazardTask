function tf = ismember(a,s,flag)%ISMEMBER True for set member.%   ISMEMBER(A,S) when A is a vector returns a vector containing 1 where%   the elements of A are in the set S and 0 otherwise.  A and S can be %   cell arrays of strings.%%   ISMEMBER(A,S,'rows') when A and S are matrices with the same%   number of columns returns a vector containing 1 where the rows of%   A are also rows of S and 0 otherwise.%%   This works the same as the standard ISMEMBER but fixed a bug%   with nans (if a was a col vector & had nans, it would return a row vector)%%   See also UNIQUE, INTERSECT, SETDIFF, SETXOR, UNION.%   Copyright (c) 1984-98 by The MathWorks, Inc.%   $Revision: 1.15 $  $Date: 1997/11/21 23:39:54 $%%   Revision history:%	12/8/98 jig fixed nan problemerror(nargchk(2,3,nargin));if nargin==2  s = double(s);  if (isreal(s))    s = sort(s(:));  else    [junk,idx] = sort(real(s(:)));    s = s(idx);  end  if (any(isnan(a(:))) | any(isnan(s(:))))    idx  = find(isnan(a(:)) == 0);    ainfn = ismembc(a(idx),s(find(isnan(s(:))==0)));    tf = zeros(size(a));    tf(idx) = ainfn;%    tf(isnan(a(:))) = 0;%    tf = tf;  else    tf = ismembc(a,s);  end else  tf = logical(zeros(size(a,1),1));  if isempty(a) | isempty(s), return, end  for i=size(a,1):-1:1,    tf(i) = any(strmatch(a(i,:),s,'exact'));  endend